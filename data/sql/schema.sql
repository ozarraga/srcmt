CREATE TABLE srcmt_actividad_academica_brigadista_dado (id INT, codigo_brigadista INT NOT NULL, codigo_actividad_academica INT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE srcmt_actividad_academica_miliciano (id INT, codigo_miliciano INT NOT NULL, codigo_actividad_academica INT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE srcmt_actividad_icm_brigadista_dado (id INT, codigo_brigadista INT NOT NULL, codigo_actividad INT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE srcmt_actividad_icm_miliciano (id INT, codigo_miliciano INT NOT NULL, codigo_actividad INT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE srcmt_actividades_academicas (codigo_actividad_academica INT, codigo_tipo_actividad INT NOT NULL, actividad CHAR(255) NOT NULL, responsable CHAR(255), fecha DATE NOT NULL, lugar VARCHAR(255) NOT NULL, duracion VARCHAR(50) NOT NULL, descripcion VARCHAR(255), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(codigo_actividad_academica));
CREATE TABLE srcmt_actividades_icm (codigo_actividad_icm INT, codigo_tipo_actividad INT NOT NULL, actividad VARCHAR(255) NOT NULL, responsable VARCHAR(255), fecha DATE NOT NULL, lugar VARCHAR(255) NOT NULL, duracion VARCHAR(50) NOT NULL, descripcion VARCHAR(255), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(codigo_actividad_icm));
CREATE TABLE srcmt_brigadistas_dado (codigo_brigadista INT, nacionalidad CHAR(1) NOT NULL, cedula_identidad INT NOT NULL, religion CHAR(15), primer_apellido CHAR(30) NOT NULL, segundo_apellido CHAR(30), primer_nombre CHAR(30) NOT NULL, segundo_nombre CHAR(30), sexo VARCHAR(1) NOT NULL, fecha_nacimiento DATE NOT NULL, lugar_de_nacimiento CHAR(40), estado_civil VARCHAR(11), foto CHAR(255), grupo_sanguineo VARCHAR(4) NOT NULL, codigo_estado INT, codigo_municipio INT, codigo_parroquia INT, codigo_ciudad INT, direccion_domiciliaria TEXT NOT NULL, telefono_domicilio CHAR(20) NOT NULL, telefono_movil CHAR(20), correo_electronico TEXT, direccion_emergencia TEXT NOT NULL, telefono_emergencia CHAR(20) NOT NULL, unidad_adscripcion_laboral CHAR(50), extension_interna CHAR(6), perfil_empleado VARCHAR(14) DEFAULT NULL, jefe_sector CHAR(50), grado_instruccion VARCHAR(14) NOT NULL, especialidad TEXT NOT NULL, sedes INT NOT NULL, jerarquia CHAR(20), profesion CHAR(100), oficio CHAR(100), centro_votacion_cne CHAR(255), direccion_oficina TEXT, talla_pantalon CHAR(4), talla_camisa CHAR(4), talla_calzado CHAR(4), talla_gorra CHAR(4), estatura CHAR(4), peso FLOAT NOT NULL, color_cabello CHAR(10) NOT NULL, color_piel CHAR(20) NOT NULL, discapacidad TEXT, alergias TEXT, dominio_mano VARCHAR(15), deporte CHAR(20), actividades_culturales CHAR(20), apellidos_beneficiario CHAR(60) NOT NULL, nombres_beneficiario CHAR(60) NOT NULL, cedula_beneficiario CHAR(11), telefono_beneficiario CHAR(20) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(codigo_brigadista));
CREATE TABLE srcmt_ciudad (codigo_ciudad INT, codigo_estado INT, codigo_municipio INT, ciudad TEXT NOT NULL, PRIMARY KEY(codigo_ciudad, codigo_estado, codigo_municipio));
CREATE TABLE srcmt_estado (codigo_estado INT, estado CHAR(20) NOT NULL, PRIMARY KEY(codigo_estado));
CREATE TABLE srcmt_milicianos (codigo_miliciano INT, nacionalidad CHAR(1) NOT NULL, cedula_identidad INT NOT NULL, primer_apellido CHAR(30) NOT NULL, segundo_apellido CHAR(30), primer_nombre CHAR(30) NOT NULL, segundo_nombre CHAR(30), sexo VARCHAR(1) NOT NULL, fecha_nacimiento DATE NOT NULL, estado_civil VARCHAR(11), foto CHAR(255), grupo_sanguineo VARCHAR(4) NOT NULL, codigo_estado INT, codigo_municipio INT, codigo_parroquia INT, codigo_ciudad INT, direccion TEXT NOT NULL, telefono_local CHAR(20) NOT NULL, movil CHAR(20), correo_electronico TEXT, direccion_emergencia TEXT NOT NULL, telefono_emergencia CHAR(20) NOT NULL, grado_instruccion VARCHAR(14) NOT NULL, especialidad TEXT NOT NULL, idiomas CHAR(20), nivel_dominio_idioma CHAR(8), programa_formacion_grado INT NOT NULL, trayecto CHAR(3) NOT NULL, tramo CHAR(3) NOT NULL, aldea TEXT, sedes INT NOT NULL, componente CHAR(30), jerarquia CHAR(20), contingente CHAR(15), arma_servicio TEXT, batallon_unidad_origen CHAR(100), profesion CHAR(100), oficio CHAR(100), trabaja_si_no BOOLEAN, nombre_empresa CHAR(100), direccion_oficina TEXT, telefono_oficina CHAR(20), posee_vehiculo BOOLEAN, tipo_vehiculo CHAR(20), modelo_vehiculo CHAR(20), numero_placa CHAR(15), posee_licencia BOOLEAN, grado_licencia CHAR(5), porte_armas BOOLEAN, numero_porte_armas CHAR(15), tipo_armamento CHAR(11), calibre_armamento CHAR(5), signos_particulares TEXT, talla_uniforme CHAR(3) NOT NULL, talla_calzado CHAR(2) NOT NULL, estatura CHAR(4) NOT NULL, peso FLOAT NOT NULL, color_cabello CHAR(10) NOT NULL, color_piel CHAR(20) NOT NULL, discapacidad TEXT, alergias TEXT, dominio_mano VARCHAR(15), practica_deporte BOOLEAN, deporte CHAR(20), participa_actividad_cultural BOOLEAN, actividad_cultural CHAR(20), agrupacion_social TEXT, misiones TEXT, cooperativas TEXT, apellidos_beneficiario CHAR(60) NOT NULL, nombres_beneficiario CHAR(60) NOT NULL, cedula_beneficiario CHAR(11), telefono_beneficiario CHAR(20) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(codigo_miliciano));
CREATE TABLE srcmt_municipio (codigo_municipio INT, codigo_estado INT, municipio TEXT NOT NULL, PRIMARY KEY(codigo_municipio, codigo_estado));
CREATE TABLE srcmt_parroquia (codigo_parroquia INT, parroquia TEXT NOT NULL, codigo_municipio INT, codigo_estado INT, PRIMARY KEY(codigo_parroquia, codigo_municipio, codigo_estado));
CREATE TABLE srcmt_pfg (id_pfg INT, pfg CHAR(50) NOT NULL, PRIMARY KEY(id_pfg));
CREATE TABLE srcmt_sedes (id_sedes INT, sedes CHAR(50) NOT NULL, direccion TEXT, PRIMARY KEY(id_sedes));
CREATE TABLE srcmt_tipo_actividad (codigo_tipo_actividad INT, tipo_actividad CHAR(50) NOT NULL, PRIMARY KEY(codigo_tipo_actividad));
CREATE TABLE sf_guard_forgot_password (id BIGSERIAL, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at TIMESTAMP NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE sf_guard_group (id BIGSERIAL, name VARCHAR(255) UNIQUE, description VARCHAR(1000), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(group_id, permission_id));
CREATE TABLE sf_guard_permission (id BIGSERIAL, name VARCHAR(255) UNIQUE, description VARCHAR(1000), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE sf_guard_remember_key (id BIGSERIAL, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE sf_guard_user (id BIGSERIAL, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active BOOLEAN DEFAULT 'true', is_super_admin BOOLEAN DEFAULT 'false', last_login TIMESTAMP, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(user_id, group_id));
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(user_id, permission_id));
CREATE SEQUENCE srcmt_actividad_academica_brigadista_dado_id_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_actividad_academica_miliciano_id_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_actividad_icm_brigadista_dado_id_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_actividad_icm_miliciano_id_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_actividades_academicas_codigo_actividad_academica_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_actividades_icm_codigo_actividad_icm_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_brigadistas_dado_codigo_brigadista_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_milicianos_codigo_miliciano_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_pfg_id_pfg_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_sedes_id_sedes_seq INCREMENT 1 START 1;
CREATE SEQUENCE srcmt_tipo_actividad_codigo_tipo_actividad_seq INCREMENT 1 START 1;
CREATE INDEX is_active_idx ON sf_guard_user (is_active);
ALTER TABLE srcmt_actividad_academica_brigadista_dado ADD CONSTRAINT scsc_1 FOREIGN KEY (codigo_brigadista) REFERENCES srcmt_brigadistas_dado(codigo_brigadista) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_actividad_academica_brigadista_dado ADD CONSTRAINT scsc FOREIGN KEY (codigo_actividad_academica) REFERENCES srcmt_actividades_academicas(codigo_actividad_academica) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_actividad_academica_miliciano ADD CONSTRAINT scsc_3 FOREIGN KEY (codigo_miliciano) REFERENCES srcmt_milicianos(codigo_miliciano) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_actividad_academica_miliciano ADD CONSTRAINT scsc_2 FOREIGN KEY (codigo_actividad_academica) REFERENCES srcmt_actividades_academicas(codigo_actividad_academica) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_actividad_icm_brigadista_dado ADD CONSTRAINT scsc_5 FOREIGN KEY (codigo_brigadista) REFERENCES srcmt_brigadistas_dado(codigo_brigadista) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_actividad_icm_brigadista_dado ADD CONSTRAINT scsc_4 FOREIGN KEY (codigo_actividad) REFERENCES srcmt_actividades_icm(codigo_actividad_icm) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_actividad_icm_miliciano ADD CONSTRAINT scsc_7 FOREIGN KEY (codigo_miliciano) REFERENCES srcmt_milicianos(codigo_miliciano) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_actividad_icm_miliciano ADD CONSTRAINT scsc_6 FOREIGN KEY (codigo_actividad) REFERENCES srcmt_actividades_icm(codigo_actividad_icm) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_actividades_academicas ADD CONSTRAINT scsc_8 FOREIGN KEY (codigo_tipo_actividad) REFERENCES srcmt_tipo_actividad(codigo_tipo_actividad) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_actividades_icm ADD CONSTRAINT scsc_13 FOREIGN KEY (codigo_tipo_actividad) REFERENCES srcmt_tipo_actividad(codigo_tipo_actividad) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_brigadistas_dado ADD CONSTRAINT srcmt_brigadistas_dado_sedes_srcmt_sedes_id_sedes FOREIGN KEY (sedes) REFERENCES srcmt_sedes(id_sedes) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_ciudad ADD CONSTRAINT srcmt_ciudad_codigo_estado_srcmt_municipio_codigo_estado FOREIGN KEY (codigo_estado) REFERENCES srcmt_municipio(codigo_estado) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_ciudad ADD CONSTRAINT srcmt_ciudad_codigo_estado_srcmt_estado_codigo_estado FOREIGN KEY (codigo_estado) REFERENCES srcmt_estado(codigo_estado) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_milicianos ADD CONSTRAINT srcmt_milicianos_sedes_srcmt_sedes_id_sedes FOREIGN KEY (sedes) REFERENCES srcmt_sedes(id_sedes) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_milicianos ADD CONSTRAINT srcmt_milicianos_programa_formacion_grado_srcmt_pfg_id_pfg FOREIGN KEY (programa_formacion_grado) REFERENCES srcmt_pfg(id_pfg) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_municipio ADD CONSTRAINT srcmt_municipio_codigo_estado_srcmt_parroquia_codigo_estado FOREIGN KEY (codigo_estado) REFERENCES srcmt_parroquia(codigo_estado) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_municipio ADD CONSTRAINT srcmt_municipio_codigo_estado_srcmt_estado_codigo_estado FOREIGN KEY (codigo_estado) REFERENCES srcmt_estado(codigo_estado) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_municipio ADD CONSTRAINT srcmt_municipio_codigo_estado_srcmt_ciudad_codigo_estado FOREIGN KEY (codigo_estado) REFERENCES srcmt_ciudad(codigo_estado) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_parroquia ADD CONSTRAINT srcmt_parroquia_codigo_estado_srcmt_municipio_codigo_estado FOREIGN KEY (codigo_estado) REFERENCES srcmt_municipio(codigo_estado) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE srcmt_parroquia ADD CONSTRAINT srcmt_parroquia_codigo_estado_srcmt_estado_codigo_estado FOREIGN KEY (codigo_estado) REFERENCES srcmt_estado(codigo_estado) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
